{"version":3,"file":"11-practice-axios.js","sources":["../src/js/11-axios-practice.js"],"sourcesContent":["import axios from \"axios\";\n\n/**\n * https://thecatapi.com/\n *\n * 1) Створити сторінку яка при завантаженні робить запит на бекенд і оримує\n *  всі доступні breeds. https://api.thecatapi.com/v1/breeds\n *\n * 2) В інтерфейсі є форма пошуку з прив'язаним datalist з завантаженими breeds.\n *\n * 3) Користувач в формі вводить або обирає необхідний breed і при сабміті форми\n *  виконується GET запит за зображенням.\n *\n * 4) Після запиту під формою відображається картка з зображенням.\n *\n * 5) Під час запиту під формую відображається loader\n */\n\nconst form = document.querySelector(\"#search-form\");\nconst breedInput = document.querySelector(\"#breed-input\");\nconst breedsList = document.querySelector(\"#breeds-list\");\nconst loader = document.querySelector(\"#loader\");\nconst catCard = document.querySelector(\"#cat-card\");\n\nform.addEventListener(\"submit\", handleSubmit);\n\nfetchBreeds();\n\nfunction fetchBreeds() {\n    axios('https://api.thecatapi.com/v1/breeds')\n        .then((res) => {\n            breedsList.insertAdjacentHTML(\"beforeend\", populateDatalist(res.data))\n        })\n        .catch(error => {\n            console.log(error)\n        })\n}\n\nfunction populateDatalist(arr) {\n    return arr.map(({ id, name }) => `\n        <option value=\"${name}\" data-id=\"${id}\"></option>\n    `).join(\"\");\n}\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n\n    const myBreed = breedInput.value;\n    const selectedBreed = Array.from(breedsList.options)\n        .find((item) => item.value.toLowerCase() === myBreed.toLowerCase());\n\n    if(!selectedBreed) {\n        alert(\"Оберіть існуючу породу\");\n        return;\n    }\n    \n    const breedId = selectedBreed.dataset.id;\n    loader.classList.remove(\"hidden\");\n\n    axios(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n        .then(res => {\n            if(res.data.length > 0) {\n                const catImg = res.data[0].url;\n\n                catCard.innerHTML = `\n                    <div class=\"card\">\n                        <img src=\"${catImg}\" alt=\"${myBreed}\" class=\"card-image\"/>\n                        <div class=\"card-body\">\n                            <h2 class=\"card-title\">${myBreed}</h2>\n                        </div>\n                    </div>\n                `\n            } else {\n                catCard.innerHTML = `<p class=\"error-text\">Зображення не знайдено</p>`;\n            }\n        })\n        .catch(error => {\n            console.log(error);\n        })\n        .finally(() => {\n            loader.classList.add(\"hidden\");\n        })\n}\n\n"],"names":["form","breedInput","breedsList","loader","catCard","handleSubmit","fetchBreeds","axios","res","populateDatalist","error","arr","id","name","event","myBreed","selectedBreed","item","breedId","catImg"],"mappings":"oGAkBA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5CC,IAEA,SAASA,GAAc,CACnBC,EAAM,qCAAqC,EACtC,KAAMC,GAAQ,CACXN,EAAW,mBAAmB,YAAaO,EAAiBD,EAAI,IAAI,CAAC,CACjF,CAAS,EACA,MAAME,GAAS,CACZ,QAAQ,IAAIA,CAAK,CAC7B,CAAS,CACT,CAEA,SAASD,EAAiBE,EAAK,CAC3B,OAAOA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAM,IAAK;AAAA,yBACZA,CAAI,cAAcD,CAAE;AAAA,KACxC,EAAE,KAAK,EAAE,CACd,CAEA,SAASP,EAAaS,EAAO,CACzBA,EAAM,eAAc,EAEpB,MAAMC,EAAUd,EAAW,MACrBe,EAAgB,MAAM,KAAKd,EAAW,OAAO,EAC9C,KAAMe,GAASA,EAAK,MAAM,gBAAkBF,EAAQ,YAAW,CAAE,EAEtE,GAAG,CAACC,EAAe,CACf,MAAM,wBAAwB,EAC9B,MACH,CAED,MAAME,EAAUF,EAAc,QAAQ,GACtCb,EAAO,UAAU,OAAO,QAAQ,EAEhCI,EAAM,wDAAwDW,CAAO,EAAE,EAClE,KAAKV,GAAO,CACT,GAAGA,EAAI,KAAK,OAAS,EAAG,CACpB,MAAMW,EAASX,EAAI,KAAK,CAAC,EAAE,IAE3BJ,EAAQ,UAAY;AAAA;AAAA,oCAEAe,CAAM,UAAUJ,CAAO;AAAA;AAAA,qDAENA,CAAO;AAAA;AAAA;AAAA,iBAI5D,MACgBX,EAAQ,UAAY,kDAEpC,CAAS,EACA,MAAMM,GAAS,CACZ,QAAQ,IAAIA,CAAK,CAC7B,CAAS,EACA,QAAQ,IAAM,CACXP,EAAO,UAAU,IAAI,QAAQ,CACzC,CAAS,CACT"}